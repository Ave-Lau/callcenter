import{d as e,bu as a,r as s,I as t,o as l,a6 as n,g as u,f as o,m as r,w as d,$ as i,i as p,as as m,e as c,C as _,P as f,Q as v,n as y,F as b}from"./index.BNf4mxQE.js";import{E as h,a as g}from"./el-form-item.DovvAFje.js";import{E as j}from"./el-card.dwNzOk9i.js";import{a as x,E as k}from"./el-col.BnxGfA2D.js";/* empty css               */import{E as V}from"./el-button.EVl1EmMl.js";import{E as I}from"./el-input.ClClGHKY.js";import{E as w}from"./el-link.C-7CLgmT.js";import{u as E}from"./useStomp.B7NwOxnl.js";import{E as C}from"./index.Cx4IHkS0.js";import{_ as U}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./use-form-common-props.B1WHvisD.js";import"./castArray.N4XM5oBs.js";import"./error.Bg4g5axl.js";import"./_Uint8Array.Cx-nGP6U.js";import"./index.CwuJiZnh.js";import"./index.D88KRxG3.js";import"./index.MIo-y8SA.js";import"./index.DzApxU-c.js";const S={class:"app-container"},A={class:"chat-messages-wrapper"},J={key:0,class:"chat-message__content"},O={class:"text-gray-600"},P={key:1},Q=U(e({__name:"websocket",setup(e){const U=a(),Q=s(void 0),W=s([]),q=s("亲爱的朋友们，系统已恢复最新状态。"),F=s("Hi, "+U.userInfo.username+" 这里是点对点消息示例！"),G=s("root"),{isConnected:H,connect:M,subscribe:N,disconnect:T,client:X}=E({debug:!0});function $(){M()}function z(){T()}function B(){X.value&&X.value.connected&&(X.value.publish({destination:"/topic/notice",body:q.value}),W.value.push({sender:U.userInfo.username,content:q.value}))}function D(){X.value&&X.value.connected&&(X.value.publish({destination:"/app/sendToUser/"+G.value,body:F.value}),W.value.push({sender:U.userInfo.username,content:F.value}))}return t((()=>H.value),(e=>{e?(N("/topic/notice",(e=>{W.value.push({sender:"Server",content:e.body})})),N("/user/queue/greeting",(e=>{const a=JSON.parse(e.body);W.value.push({sender:a.sender,content:a.content})})),W.value.push({sender:"Server",content:"Websocket 已连接",type:"tip"})):W.value.push({sender:"Server",content:"Websocket 已断开",type:"tip"})})),l((()=>{$()})),n((()=>{z()})),(e,a)=>{const s=w,t=I,l=V,n=x,E=C,M=k,N=j,T=g,X=h;return o(),u("div",S,[r(s,{href:"https://gitee.com/youlaiorg/vue3-element-admin/blob/master/src/views/demo/websocket.vue",type:"primary",target:"_blank",class:"mb-[20px]"},{default:d((()=>a[4]||(a[4]=[i(" 示例源码 请点击>>>> ")]))),_:1,__:[4]}),r(M,{gutter:10},{default:d((()=>[r(n,{span:12},{default:d((()=>[r(N,null,{default:d((()=>[r(M,null,{default:d((()=>[r(n,{span:18},{default:d((()=>[r(t,{modelValue:p(Q),"onUpdate:modelValue":a[0]||(a[0]=e=>m(Q)?Q.value=e:null),style:{width:"200px"}},null,8,["modelValue"]),r(l,{type:"primary",class:"ml-5",disabled:p(H),onClick:$},{default:d((()=>a[5]||(a[5]=[i(" 连接 ")]))),_:1,__:[5]},8,["disabled"]),r(l,{type:"danger",disabled:!p(H),onClick:z},{default:d((()=>a[6]||(a[6]=[i(" 断开 ")]))),_:1,__:[6]},8,["disabled"])])),_:1}),r(n,{span:6,class:"text-right"},{default:d((()=>[a[9]||(a[9]=i(" 连接状态： ")),p(H)?(o(),c(E,{key:0,type:"success"},{default:d((()=>a[7]||(a[7]=[i("已连接")]))),_:1,__:[7]})):(o(),c(E,{key:1,type:"info"},{default:d((()=>a[8]||(a[8]=[i("已断开")]))),_:1,__:[8]}))])),_:1,__:[9]})])),_:1})])),_:1}),r(N,{class:"mt-5"},{default:d((()=>[r(X,{"label-width":"90px"},{default:d((()=>[r(T,{label:"消息内容"},{default:d((()=>[r(t,{modelValue:p(q),"onUpdate:modelValue":a[1]||(a[1]=e=>m(q)?q.value=e:null),type:"textarea"},null,8,["modelValue"])])),_:1}),r(T,null,{default:d((()=>[r(l,{type:"primary",onClick:B},{default:d((()=>a[10]||(a[10]=[i("发送广播")]))),_:1,__:[10]})])),_:1})])),_:1})])),_:1}),r(N,{class:"mt-5"},{default:d((()=>[r(X,{"label-width":"90px"},{default:d((()=>[r(T,{label:"消息内容"},{default:d((()=>[r(t,{modelValue:p(F),"onUpdate:modelValue":a[2]||(a[2]=e=>m(F)?F.value=e:null),type:"textarea"},null,8,["modelValue"])])),_:1}),r(T,{label:"消息接收人"},{default:d((()=>[r(t,{modelValue:p(G),"onUpdate:modelValue":a[3]||(a[3]=e=>m(G)?G.value=e:null)},null,8,["modelValue"])])),_:1}),r(T,null,{default:d((()=>[r(l,{type:"primary",onClick:D},{default:d((()=>a[11]||(a[11]=[i("发送点对点消息")]))),_:1,__:[11]})])),_:1})])),_:1})])),_:1})])),_:1}),r(n,{span:12},{default:d((()=>[r(N,null,{default:d((()=>[_("div",A,[(o(!0),u(f,null,v(p(W),((e,a)=>(o(),u("div",{key:a,class:y(["tip"===e.type?"system-notice":"chat-message",{"chat-message--sent":e.sender===p(U).userInfo.username,"chat-message--received":e.sender!==p(U).userInfo.username}])},["tip"!=e.type?(o(),u("div",J,[_("div",{class:y({"chat-message__sender":e.sender===p(U).userInfo.username,"chat-message__receiver":e.sender!==p(U).userInfo.username})},b(e.sender),3),_("div",O,b(e.content),1)])):(o(),u("div",P,b(e.content),1))],2)))),128))])])),_:1})])),_:1})])),_:1})])}}}),[["__scopeId","data-v-878ad13b"]]);export{Q as default};
