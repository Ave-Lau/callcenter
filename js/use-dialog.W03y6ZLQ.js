import{t as e,v as o,bB as l,z as a,B as n,bd as t,r as s,bZ as r,c as u,J as c,I as d,o as p,cc as i,a8 as f,H as y,a0 as v}from"./index.v8tsX86a.js";import{b as m}from"./index.BPY74GJt.js";import{U as C}from"./index.DXOljNB1.js";import{u as b}from"./el-overlay.B3_FyJaS.js";import{d as g}from"./use-form-common-props.BesHhqMc.js";import{i as B}from"./el-popper.Mqpc2_c2.js";const S=e({center:Boolean,alignCenter:Boolean,closeIcon:{type:o},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,headerClass:String,bodyClass:String,footerClass:String,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),x={close:()=>!0},D=e({...S,appendToBody:Boolean,appendTo:{type:m.to.type,default:"body"},beforeClose:{type:a(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,headerClass:String,bodyClass:String,footerClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"}}),F={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[C]:e=>l(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},h=(e,o)=>{var l;const a=n().emit,{nextZIndex:m}=t();let S="";const x=g(),D=g(),F=s(!1),h=s(!1),I=s(!1),O=s(null!=(l=e.zIndex)?l:m());let A,j;const w=r("namespace",i),k=u((()=>{const o={},l=`--${w.value}-dialog`;return e.fullscreen||(e.top&&(o[`${l}-margin-top`]=e.top),e.width&&(o[`${l}-width`]=c(e.width))),o})),z=u((()=>e.alignCenter?{display:"flex"}:{}));function E(){null==j||j(),null==A||A(),e.openDelay&&e.openDelay>0?({stop:A}=f((()=>N()),e.openDelay)):N()}function L(){null==A||A(),null==j||j(),e.closeDelay&&e.closeDelay>0?({stop:j}=f((()=>T()),e.closeDelay)):T()}function M(){e.beforeClose?e.beforeClose((function(e){e||(h.value=!0,F.value=!1)})):L()}function N(){y&&(F.value=!0)}function T(){F.value=!1}return e.lockScroll&&b(F),d((()=>e.modelValue),(l=>{l?(h.value=!1,E(),I.value=!0,O.value=B(e.zIndex)?m():O.value++,v((()=>{a("open"),o.value&&(o.value.parentElement.scrollTop=0,o.value.parentElement.scrollLeft=0,o.value.scrollTop=0)}))):F.value&&L()})),d((()=>e.fullscreen),(e=>{o.value&&(e?(S=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=S)})),p((()=>{e.modelValue&&(F.value=!0,I.value=!0,E())})),{afterEnter:function(){a("opened")},afterLeave:function(){a("closed"),a(C,!1),e.destroyOnClose&&(I.value=!1)},beforeLeave:function(){a("close")},handleClose:M,onModalClick:function(){e.closeOnClickModal&&M()},close:L,doClose:T,onOpenAutoFocus:function(){a("openAutoFocus")},onCloseAutoFocus:function(){a("closeAutoFocus")},onCloseRequested:function(){e.closeOnPressEscape&&M()},onFocusoutPrevented:function(e){var o;"pointer"===(null==(o=e.detail)?void 0:o.focusReason)&&e.preventDefault()},titleId:x,bodyId:D,closed:h,style:k,overlayDialogStyle:z,rendered:I,visible:F,zIndex:O}};export{D as a,x as b,S as c,F as d,h as u};
