import{d as e,r as l,S as t,bc as a,c as o,g as r,f as n,k as p,i as s,m as i,U as u,w as d,C as m,V as c,e as f,h as v,P as g,Q as y,Z as _,$ as b,l as h,n as k,F as j,aI as V,av as w,E as x,aZ as C,aP as U}from"./index.9JKaP-sD.js";import{v as E}from"./el-loading.at4BLbaz.js";import"./el-popper.C3Pu_ij_.js";import{E as S}from"./el-popover.B6yE6Qoi.js";import{_ as A}from"./index.DG_UqU4t.js";import{a as N,E as I}from"./el-table-column.hNoDaJcq.js";import"./el-checkbox.Bur5g5lu.js";import"./el-tooltip.l0sNRNKZ.js";import"./el-scrollbar.C274zESD.js";/* empty css               */import{E as R,a as $}from"./el-form-item.DdL6idCj.js";import{E as z}from"./el-button.B4H6IVGP.js";import{E as D}from"./el-date-picker.DcOVPyAL.js";import{E as M}from"./el-input.Chz6srB3.js";import{E as P,a as Y}from"./el-select.CCXhVsFx.js";import"./el-tree.CkmNR6ke.js";import"./el-text.CsIVsB9Q.js";import{E as K}from"./el-tree-select.B1qFODJZ.js";import{_ as T}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as F}from"./DictLabel.vue_vue_type_script_setup_true_lang.DhQyB9FZ.js";import{E as q}from"./el-link.CV3V6DlU.js";import{E as Q}from"./index.BQYkukDI.js";import"./index.lyQhgUr6.js";import"./error.CQ4af0Sv.js";import"./index.DnF326PC.js";import"./use-form-common-props.B0GfQdWg.js";import"./dropdown.Dok0sEb9.js";import"./el-pagination.I7-4RGBb.js";import"./isEqual.DuIQUmCM.js";import"./_Uint8Array.DcERNRZL.js";import"./index.DuG78XL4.js";import"./_baseIteratee.B-FL-iVy.js";import"./debounce.CFz_ETfP.js";import"./index.DcZ-ksjR.js";import"./castArray.BWQtUVzp.js";import"./index.DE-Rb937.js";import"./index.DoclTp79.js";import"./index.DhkCuil8.js";import"./token.DWNpOE8r.js";import"./strings.CMCOzoru.js";import"./scroll.YSoXCINH.js";const Z={class:"feedback"},G=T(e({__name:"index",props:{selectConfig:{},text:{default:""}},emits:["confirmClick"],setup(e,{emit:C}){const U=e,T=C,F=U.selectConfig.pk??"id",q=!0===U.selectConfig.multiple,Q=U.selectConfig.width??"100%",G=U.selectConfig.placeholder??"请选择",J=l(!1),L=l(!1),O=l(0),X=l([]),B=t({pageNum:1,pageSize:10}),H=l(),W=l(Q);a(H,(e=>{W.value=`${e[0].contentRect.width}px`}));const ee=l();for(const l of U.selectConfig.formItems)B[l.prop]=l.initialValue??"";function le(){var e;null==(e=ee.value)||e.resetFields(),ae(!0)}function te(){ae(!0)}function ae(e=!1){L.value=!0,e&&(B.pageNum=1,B.pageSize=10),U.selectConfig.indexAction(B).then((e=>{O.value=e.total,X.value=e.list})).finally((()=>{L.value=!1}))}const oe=l();for(const l of U.selectConfig.tableColumns)if("selection"===l.type){l.reserveSelection=!0;break}const re=l([]),ne=o((()=>re.value.length>0?`已选(${re.value.length})`:"确 定"));function pe(e,l){var t,a,o;q||0===e.length?re.value=e:(re.value=[e[e.length-1]],null==(t=oe.value)||t.clearSelection(),null==(a=oe.value)||a.toggleRowSelection(re.value[0],!0),null==(o=oe.value)||o.setCurrentRow(re.value[0]))}function se(e){q&&(re.value=e)}function ie(){ae()}const ue=l(!1);function de(){!1===ue.value&&(ue.value=!0,ae())}function me(){0!==re.value.length?(J.value=!1,T("confirmClick",re.value)):V.error("请选择数据")}function ce(){var e;null==(e=oe.value)||e.clearSelection(),re.value=[]}function fe(){J.value=!1}const ve=l();return(e,l)=>{const t=w("ArrowDown"),a=x,o=M,V=Y,C=P,U=K,T=D,ae=$,re=z,ue=R,ge=N,ye=I,_e=A,be=S,he=E;return n(),r("div",{ref_key:"tableSelectRef",ref:H,style:p("width:"+s(Q))},[i(be,u({visible:J.value,width:W.value,placement:"bottom-end"},e.selectConfig.popover,{onShow:de}),{reference:d((()=>[m("div",{onClick:l[0]||(l[0]=e=>J.value=!J.value)},[h(e.$slots,"default",{},(()=>[i(o,{class:"reference","model-value":e.text,readonly:!0,placeholder:s(G)},{suffix:d((()=>[i(a,{style:p({transform:J.value?"rotate(180deg)":"rotate(0)",transition:"transform .5s"})},{default:d((()=>[i(t)])),_:1},8,["style"])])),_:1},8,["model-value","placeholder"])]),!0)])])),default:d((()=>[m("div",{ref_key:"popoverContentRef",ref:ve},[i(ue,{ref_key:"formRef",ref:ee,model:B,inline:!0},{default:d((()=>[(n(!0),r(g,null,y(e.selectConfig.formItems,(e=>(n(),f(ae,{key:e.prop,label:e.label,prop:e.prop},{default:d((()=>{var l,t;return["input"===e.type?(n(),r(g,{key:0},["number"===(null==(l=e.attrs)?void 0:l.type)?(n(),f(o,u({key:0,modelValue:B[e.prop],"onUpdate:modelValue":l=>B[e.prop]=l,modelModifiers:{number:!0}},{ref_for:!0},e.attrs,{onKeyup:_(te,["enter"])}),null,16,["modelValue","onUpdate:modelValue"])):(n(),f(o,u({key:1,modelValue:B[e.prop],"onUpdate:modelValue":l=>B[e.prop]=l},{ref_for:!0},e.attrs,{onKeyup:_(te,["enter"])}),null,16,["modelValue","onUpdate:modelValue"]))],64)):"select"===e.type?(n(),f(C,u({key:1,modelValue:B[e.prop],"onUpdate:modelValue":l=>B[e.prop]=l},{ref_for:!0},e.attrs),{default:d((()=>[(n(!0),r(g,null,y(e.options,(e=>(n(),f(V,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1040,["modelValue","onUpdate:modelValue"])):"tree-select"===e.type?(n(),f(U,u({key:2,modelValue:B[e.prop],"onUpdate:modelValue":l=>B[e.prop]=l},{ref_for:!0},e.attrs),null,16,["modelValue","onUpdate:modelValue"])):"date-picker"===e.type?(n(),f(T,u({key:3,modelValue:B[e.prop],"onUpdate:modelValue":l=>B[e.prop]=l},{ref_for:!0},e.attrs),null,16,["modelValue","onUpdate:modelValue"])):(n(),r(g,{key:4},["number"===(null==(t=e.attrs)?void 0:t.type)?(n(),f(o,u({key:0,modelValue:B[e.prop],"onUpdate:modelValue":l=>B[e.prop]=l,modelModifiers:{number:!0}},{ref_for:!0},e.attrs,{onKeyup:_(te,["enter"])}),null,16,["modelValue","onUpdate:modelValue"])):(n(),f(o,u({key:1,modelValue:B[e.prop],"onUpdate:modelValue":l=>B[e.prop]=l},{ref_for:!0},e.attrs,{onKeyup:_(te,["enter"])}),null,16,["modelValue","onUpdate:modelValue"]))],64))]})),_:2},1032,["label","prop"])))),128)),i(ae,null,{default:d((()=>[i(re,{type:"primary",icon:"search",onClick:te},{default:d((()=>l[4]||(l[4]=[b("搜索")]))),_:1,__:[4]}),i(re,{icon:"refresh",onClick:le},{default:d((()=>l[5]||(l[5]=[b("重置")]))),_:1,__:[5]})])),_:1})])),_:1},8,["model"]),c((n(),f(ye,{ref_key:"tableRef",ref:oe,data:X.value,border:!0,"max-height":250,"row-key":s(F),"highlight-current-row":!0,class:k({radio:!q}),onSelect:pe,onSelectAll:se},{default:d((()=>[(n(!0),r(g,null,y(e.selectConfig.tableColumns,(l=>(n(),r(g,{key:l.prop},["custom"===l.templet?(n(),f(ge,u({key:0,ref_for:!0},l),{default:d((t=>[h(e.$slots,l.slotName??l.prop,u({prop:l.prop},{ref_for:!0},t),void 0,!0)])),_:2},1040)):(n(),f(ge,u({key:1,ref_for:!0},l),null,16))],64)))),128))])),_:3},8,["data","row-key","class"])),[[he,L.value]]),O.value>0?(n(),f(_e,{key:0,total:O.value,"onUpdate:total":l[1]||(l[1]=e=>O.value=e),page:B.pageNum,"onUpdate:page":l[2]||(l[2]=e=>B.pageNum=e),limit:B.pageSize,"onUpdate:limit":l[3]||(l[3]=e=>B.pageSize=e),onPagination:ie},null,8,["total","page","limit"])):v("",!0),m("div",Z,[i(re,{type:"primary",size:"small",onClick:me},{default:d((()=>[b(j(ne.value),1)])),_:1}),i(re,{size:"small",onClick:ce},{default:d((()=>l[6]||(l[6]=[b("清 空")]))),_:1,__:[6]}),i(re,{size:"small",onClick:fe},{default:d((()=>l[7]||(l[7]=[b("关 闭")]))),_:1,__:[7]})])],512)])),_:3},16,["visible","width"])],4)}}}),[["__scopeId","data-v-6236b7fc"]]),J={pk:"id",width:"70%",placeholder:"请选择用户",formItems:[{type:"input",label:"关键字",prop:"keywords",attrs:{placeholder:"用户名/昵称/手机号",clearable:!0,style:{width:"200px"}}},{type:"tree-select",label:"部门",prop:"deptId",attrs:{placeholder:"请选择",data:[{value:1,label:"有来技术",children:[{value:2,label:"研发部门"},{value:3,label:"测试部门"}]}],filterable:!0,"check-strictly":!0,"render-after-expand":!1,clearable:!0,style:{width:"150px"}}},{type:"select",label:"状态",prop:"status",attrs:{placeholder:"全部",clearable:!0,style:{width:"100px"}},options:[{label:"启用",value:1},{label:"禁用",value:0}]},{type:"date-picker",label:"创建时间",prop:"createAt",attrs:{type:"daterange","range-separator":"~","start-placeholder":"开始时间","end-placeholder":"截止时间","value-format":"YYYY-MM-DD",style:{width:"240px"}}}],indexAction:function(e){if("createAt"in e){const l=e.createAt;(null==l?void 0:l.length)>1&&(e.startTime=l[0],e.endTime=l[1]),delete e.createAt}return C.getPage(e)},tableColumns:[{type:"selection",width:50,align:"center"},{label:"编号",align:"center",prop:"id",width:100},{label:"用户名",align:"center",prop:"username"},{label:"用户昵称",align:"center",prop:"nickname",width:120},{label:"性别",align:"center",prop:"gender",width:100,templet:"custom",slotName:"gender"},{label:"部门",align:"center",prop:"deptName",width:120},{label:"手机号码",align:"center",prop:"mobile",width:120},{label:"状态",align:"center",prop:"status",templet:"custom",slotName:"status"},{label:"创建时间",align:"center",prop:"createTime",width:180}]},L={class:"app-container"},O=e({__name:"index",setup(e){const t=U(),a=l();function p(e){a.value=e[0]}const u=o((()=>{var e;const l=null==(e=t.getDictionary("gender").find((e=>{var l;return e.value==(null==(l=a.value)?void 0:l.gender)})))?void 0:e.label;return a.value?`${a.value.username} - ${l} - ${a.value.deptName}`:""}));return(e,l)=>{const t=q,a=Q,o=F,m=G;return n(),r("div",L,[i(t,{href:"https://gitee.com/youlaiorg/vue3-element-admin/blob/master/src/views/demo/table-select/index.vue",type:"primary",target:"_blank",class:"mb-10"},{default:d((()=>l[0]||(l[0]=[b(" 示例源码 请点击>>>> ")]))),_:1,__:[0]}),i(m,{text:s(u),"select-config":s(J),onConfirmClick:p},{status:d((e=>[i(a,{type:1==e.row[e.prop]?"success":"info"},{default:d((()=>[b(j(1==e.row[e.prop]?"启用":"禁用"),1)])),_:2},1032,["type"])])),gender:d((e=>[i(o,{modelValue:e.row.gender,"onUpdate:modelValue":l=>e.row.gender=l,code:"gender"},null,8,["modelValue","onUpdate:modelValue"])])),_:1},8,["text","select-config"])])}}});export{O as default};
