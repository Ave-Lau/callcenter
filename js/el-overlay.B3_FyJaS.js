import{bE as e,d as t,t as o,b as s,m as n,a7 as a,l as u,z as l,o as d,R as r,a6 as i,J as c,al as m,c as f,H as v,a2 as p,I as y,bQ as b,a1 as E,bR as h,a3 as M}from"./index.v8tsX86a.js";import{P as w}from"./el-popper.Mqpc2_c2.js";import{t as x}from"./error.DLYaCDzj.js";import{a as g}from"./scroll.RmB_wBuD.js";const k=t=>{if(!t)return{onClick:e,onMousedown:e,onMouseup:e};let o=!1,s=!1;return{onClick:e=>{o&&s&&t(e),o=s=!1},onMousedown:e=>{o=e.target===e.currentTarget},onMouseup:e=>{s=e.target===e.currentTarget}}},L=o({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:l([String,Array,Object])},zIndex:{type:l([String,Number])}});const Y=t({name:"ElOverlay",props:L,emits:{click:e=>e instanceof MouseEvent},setup(e,{slots:t,emit:o}){const l=s("overlay"),{onClick:d,onMousedown:r,onMouseup:i}=k(e.customMaskEvent?void 0:e=>{o("click",e)});return()=>e.mask?n("div",{class:[l.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:d,onMousedown:r,onMouseup:i},[u(t,"default")],w.STYLE|w.CLASS|w.PROPS,["onClick","onMouseup","onMousedown"]):a("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[u(t,"default")])}}),C=(e,t,o,s)=>{const n={offsetX:0,offsetY:0},a=(t,o)=>{if(e.value){const{offsetX:a,offsetY:u}=n,l=e.value.getBoundingClientRect(),d=l.left,r=l.top,i=l.width,m=l.height,f=-d+a,v=-r+u,p=document.documentElement.clientWidth-d-i+a,y=document.documentElement.clientHeight-r-m+u;(null==s?void 0:s.value)||(t=Math.min(Math.max(t,f),p),o=Math.min(Math.max(o,v),y)),n.offsetX=t,n.offsetY=o,e.value.style.transform=`translate(${c(t)}, ${c(o)})`}},u=e=>{const t=e.clientX,o=e.clientY,{offsetX:s,offsetY:u}=n,l=e=>{const n=s+e.clientX-t,l=u+e.clientY-o;a(n,l)},d=()=>{document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",d)};document.addEventListener("mousemove",l),document.addEventListener("mouseup",d)},l=()=>{t.value&&e.value&&(t.value.removeEventListener("mousedown",u),window.removeEventListener("resize",m))},m=()=>{const{offsetX:e,offsetY:t}=n;a(e,t)};return d((()=>{r((()=>{o.value?t.value&&e.value&&(t.value.addEventListener("mousedown",u),window.addEventListener("resize",m)):l()}))})),i((()=>{l()})),{resetPosition:()=>{n.offsetX=0,n.offsetY=0,e.value&&(e.value.style.transform="")},updatePosition:m}},z=(e,t={})=>{m(e)||x("[useLockscreen]","You need to pass a ref param to this function");const o=t.ns||s("popup"),n=f((()=>o.bm("parent","hidden")));if(!v||p(document.body,n.value))return;let a=0,u=!1,l="0";const d=()=>{setTimeout((()=>{"undefined"!=typeof document&&u&&document&&(document.body.style.width=l,M(document.body,n.value))}),200)};y(e,(e=>{if(!e)return void d();u=!p(document.body,n.value),u&&(l=document.body.style.width,E(document.body,n.value)),a=g(o.namespace.value);const t=document.documentElement.clientHeight<document.body.scrollHeight,s=h(document.body,"overflowY");a>0&&(t||"scroll"===s)&&u&&(document.body.style.width=`calc(100% - ${a}px)`)})),b((()=>d()))};export{Y as E,C as a,k as b,z as u};
